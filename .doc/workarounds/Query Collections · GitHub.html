<!DOCTYPE html>
<!-- saved from url=(0041)https://gist.github.com/rhythmus/11123057 -->
<html lang="en" class=" is-copy-enabled emoji-size-boost is-u2f-enabled"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    

    <link crossorigin="anonymous" href="./Query Collections · GitHub_files/frameworks-46094950e058d2cf30542982edfa17467b40fef171a28a786bdae50fab15526e.css" integrity="sha256-RglJUOBY0s8wVCmC7foXRntA/vFxoop4a9rlD6sVUm4=" media="all" rel="stylesheet">
    <link crossorigin="anonymous" href="./Query Collections · GitHub_files/github-65eae0e61ee036b2612ade2e43f38c8dea398a79f76be2aa2abebc4e52d4ccbe.css" integrity="sha256-Zerg5h7gNrJhKt4uQ/OMjeo5inn3a+KqKr68TlLUzL4=" media="all" rel="stylesheet">
    
    
    <link crossorigin="anonymous" href="./Query Collections · GitHub_files/site-3b27741f2e22b48854ecee715112d86949a7c9e4e502f41739c4578cc65283da.css" integrity="sha256-Oyd0Hy4itIhU7O5xURLYaUmnyeTlAvQXOcRXjMZSg9o=" media="all" rel="stylesheet">
    
    

    <link as="script" href="./Query Collections · GitHub_files/frameworks-8007c8554b9de9a580b0d39282059ceac6f893b174f83aaa59f400ae2e92b126.js" rel="preload">
    
    <link as="script" href="./Query Collections · GitHub_files/github-afd18128214857ce8e4fdc72967acfb623a0afbdd9adecea83bdd7f53839a642.js" rel="preload">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta name="viewport" content="width=device-width">
    <meta content="origin-when-cross-origin" name="referrer">
    
    <title>Query Collections · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="https://gist.github.com/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://gist.github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" href="https://gist.github.com/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://gist.github.com/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://gist.github.com/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://gist.github.com/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://gist.github.com/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://gist.github.com/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://gist.github.com/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://gist.github.com/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://gist.github.com/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://gist.github.com/apple-touch-icon-180x180.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="https://avatars3.githubusercontent.com/u/903152?v=3&amp;s=400" name="twitter:image:src"><meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="Query Collections" name="twitter:title"><meta content="Query Collections" name="twitter:description">
      <meta content="https://avatars3.githubusercontent.com/u/903152?v=3&amp;s=400" property="og:image"><meta content="Gist" property="og:site_name"><meta content="object" property="og:type"><meta content="Query Collections" property="og:title"><meta content="https://gist.github.com/rhythmus/11123057" property="og:url"><meta content="Query Collections" property="og:description">
      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">
    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">
    <link rel="assets" href="https://assets-cdn.github.com/">
    
    <meta name="pjax-timeout" content="1000">
    

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="gist_code" data-pjax-transient="">

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
<meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-analytics" content="UA-3769691-4">

<meta content="collector.githubapp.com" name="octolytics-host"><meta content="gist" name="octolytics-app-id"><meta content="05BD024F:124F:BDFFB4B:577D1B10" name="octolytics-dimension-request_id">
<meta content="/&lt;user-name&gt;/&lt;gist-id&gt;" data-pjax-transient="true" name="analytics-location">



  <meta class="js-ga-set" name="dimension1" content="Logged Out">


    <meta content="true" name="octolytics-dimension-public"><meta content="11123057" name="octolytics-dimension-gist_id"><meta content="11123057" name="octolytics-dimension-gist_name"><meta content="false" name="octolytics-dimension-anonymous"><meta content="903152" name="octolytics-dimension-owner_id"><meta content="rhythmus" name="octolytics-dimension-owner_login"><meta content="true" name="octolytics-dimension-forked"><meta content="10616795" name="octolytics-dimension-parent_gist_id"><meta content="10616795" name="octolytics-dimension-parent_gist_name"><meta content="false" name="octolytics-dimension-parent_anonymous"><meta content="395093" name="octolytics-dimension-parent_owner_id"><meta content="Sewdn" name="octolytics-dimension-parent_owner_login">

  <meta class="js-ga-set" name="dimension5" content="public">
  <meta class="js-ga-set" name="dimension6" content="owned">
  <meta class="js-ga-set" name="dimension7" content="markdown">



        <meta name="hostname" content="gist.github.com">
    <meta name="user-login" content="">

        <meta name="expected-hostname" content="gist.github.com">
      <meta name="js-proxy-site-detection-payload" content="MjdhY2U1MjY4M2VhYzJlMGExMGYyNWU1NDRhZTQ4NDE3ZTA3ZDhiNzk0ZDcxYzFhNGNjMmE5MzVjMDU0NGIyZXx7InJlbW90ZV9hZGRyZXNzIjoiNS4xODkuMi43OSIsInJlcXVlc3RfaWQiOiIwNUJEMDI0RjoxMjRGOkJERkZCNEI6NTc3RDFCMTAiLCJ0aW1lc3RhbXAiOjE0Njc4MTY3MjB9">


      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#4078c0">
      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

    <meta name="html-safe-nonce" content="7e8d35246cbe6a6055aa96f1b48487c3ee857732">
    <meta content="f3c35862941ae6cffac1b64ceaa42d9d6f738385" name="form-nonce">

    <meta http-equiv="x-pjax-version" content="f9945c080b8d2d215ea51b6db5a45656">
    

        <link href="https://gist.github.com/rhythmus.atom" rel="alternate" title="atom" type="application/atom+xml">
  
  <link crossorigin="anonymous" href="./Query Collections · GitHub_files/gist-713674463b13fef4283a3095245780f0179f1b208dc8ca09f663979b4ff37a3c.css" integrity="sha256-cTZ0RjsT/vQoOjCVJFeA8BefGyCNyMoJ9mOXm0/zejw=" media="all" rel="stylesheet">


  <script type="text/javascript">try {
window.AG_onLoad = function(func) { if (window.addEventListener) { window.addEventListener('DOMContentLoaded', func); } };
window.AG_removeElementById = function(id) { var element = document.getElementById(id); if (element && element.parentNode) { element.parentNode.removeChild(element); }};
window.AG_removeElementBySelector = function(selector) { if (!document.querySelectorAll) { return; } var nodes = document.querySelectorAll(selector); if (nodes) { for (var i = 0; i < nodes.length; i++) { if (nodes[i] && nodes[i].parentNode) { nodes[i].parentNode.removeChild(nodes[i]); } } } };
window.AG_each = function(selector, fn) { if (!document.querySelectorAll) return; var elements = document.querySelectorAll(selector); for (var i = 0; i < elements.length; i++) { fn(elements[i]); }; };
var AG_removeParent = function(el, fn) { while (el && el.parentNode) { if (fn(el)) { el.parentNode.removeChild(el); return; } el = el.parentNode; } };
var AdFox_getCodeScript = function() {};
AG_onLoad(function() { window.AG_each('iframe[id^="AdFox_iframe_"]', function(el) { if (el && el.parentNode) { el.parentNode.removeChild(el); } }); });
try { Object.defineProperty(window, 'noAdsAtAll', { get: function() { return true; } }); } catch (ex) {}
} catch (ex) { console.error('Error executing AG js: ' + ex); }</script><style id="clearly_highlighting_css" type="text/css">/* selection */ html.clearly_highlighting_enabled ::-moz-selection { background: rgba(246, 238, 150, 0.99); } html.clearly_highlighting_enabled ::selection { background: rgba(246, 238, 150, 0.99); } /* cursor */ html.clearly_highlighting_enabled {    /* cursor and hot-spot position -- requires a default cursor, after the URL one */    cursor: url("chrome-extension://phmkpljilkopjoacakielhagnbbmdmgn/clearly/images/highlight--cursor.png") 14 16, text; } /* highlight tag */ em.clearly_highlight_element {    font-style: inherit !important; font-weight: inherit !important;    background-image: url("chrome-extension://phmkpljilkopjoacakielhagnbbmdmgn/clearly/images/highlight--yellow.png");    background-repeat: repeat-x; background-position: top left; background-size: 100% 100%; } /* the delete-buttons are positioned relative to this */ em.clearly_highlight_element.clearly_highlight_first { position: relative; } /* delete buttons */ em.clearly_highlight_element a.clearly_highlight_delete_element {    display: none; cursor: pointer;    padding: 0; margin: 0; line-height: 0;    position: absolute; width: 34px; height: 34px; left: -17px; top: -17px;    background-image: url("chrome-extension://phmkpljilkopjoacakielhagnbbmdmgn/clearly/images/highlight--delete-sprite.png"); background-repeat: no-repeat; background-position: 0px 0px; } em.clearly_highlight_element a.clearly_highlight_delete_element:hover { background-position: -34px 0px; } /* retina */ @media (min--moz-device-pixel-ratio: 2), (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {    em.clearly_highlight_element { background-image: url("chrome-extension://phmkpljilkopjoacakielhagnbbmdmgn/clearly/images/highlight--yellow@2x.png"); }    em.clearly_highlight_element a.clearly_highlight_delete_element { background-image: url("chrome-extension://phmkpljilkopjoacakielhagnbbmdmgn/clearly/images/highlight--delete-sprite@2x.png"); background-size: 68px 34px; } } </style><style>[touch-action="none"]{ -ms-touch-action: none; touch-action: none; }[touch-action="pan-x"]{ -ms-touch-action: pan-x; touch-action: pan-x; }[touch-action="pan-y"]{ -ms-touch-action: pan-y; touch-action: pan-y; }[touch-action="scroll"],[touch-action="pan-x pan-y"],[touch-action="pan-y pan-x"]{ -ms-touch-action: pan-x pan-y; touch-action: pan-x pan-y; }</style></head>


  <body class="logged-out   env-production macintosh">
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"></div>
    <a href="https://gist.github.com/rhythmus/11123057#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>

    
    
    



        <div class="header gist-header header-logged-out" role="banner">
  <div class="container clearfix">

    <a href="https://gist.github.com/" aria-label="Gist Homepage" class="header-logo-wordmark" data-hotkey="g d">
      <svg aria-hidden="true" class="octicon octicon-logo-github" height="28" version="1.1" viewBox="0 0 45 16" width="78"><path d="M18.53 12.03h-.02c.009 0 .015.01.024.011h.006l-.01-.01zm.004.011c-.093.001-.327.05-.574.05-.78 0-1.05-.36-1.05-.83V8.13h1.59c.09 0 .16-.08.16-.19v-1.7c0-.09-.08-.17-.16-.17h-1.59V3.96c0-.08-.05-.13-.14-.13h-2.16c-.09 0-.14.05-.14.13v2.17s-1.09.27-1.16.28c-.08.02-.13.09-.13.17v1.36c0 .11.08.19.17.19h1.11v3.28c0 2.44 1.7 2.69 2.86 2.69.53 0 1.17-.17 1.27-.22.06-.02.09-.09.09-.16v-1.5a.177.177 0 0 0-.146-.18zm23.696-2.2c0-1.81-.73-2.05-1.5-1.97-.6.04-1.08.34-1.08.34v3.52s.49.34 1.22.36c1.03.03 1.36-.34 1.36-2.25zm2.43-.16c0 3.43-1.11 4.41-3.05 4.41-1.64 0-2.52-.83-2.52-.83s-.04.46-.09.52c-.03.06-.08.08-.14.08h-1.48c-.1 0-.19-.08-.19-.17l.02-11.11c0-.09.08-.17.17-.17h2.13c.09 0 .17.08.17.17v3.77s.82-.53 2.02-.53l-.01-.02c1.2 0 2.97.45 2.97 3.88zm-8.72-3.61H33.84c-.11 0-.17.08-.17.19v5.44s-.55.39-1.3.39-.97-.34-.97-1.09V6.25c0-.09-.08-.17-.17-.17h-2.14c-.09 0-.17.08-.17.17v5.11c0 2.2 1.23 2.75 2.92 2.75 1.39 0 2.52-.77 2.52-.77s.05.39.08.45c.02.05.09.09.16.09h1.34c.11 0 .17-.08.17-.17l.02-7.47c0-.09-.08-.17-.19-.17zm-23.7-.01h-2.13c-.09 0-.17.09-.17.2v7.34c0 .2.13.27.3.27h1.92c.2 0 .25-.09.25-.27V6.23c0-.09-.08-.17-.17-.17zm-1.05-3.38c-.77 0-1.38.61-1.38 1.38 0 .77.61 1.38 1.38 1.38.75 0 1.36-.61 1.36-1.38 0-.77-.61-1.38-1.36-1.38zm16.49-.25h-2.11c-.09 0-.17.08-.17.17v4.09h-3.31V2.6c0-.09-.08-.17-.17-.17h-2.13c-.09 0-.17.08-.17.17v11.11c0 .09.09.17.17.17h2.13c.09 0 .17-.08.17-.17V8.96h3.31l-.02 4.75c0 .09.08.17.17.17h2.13c.09 0 .17-.08.17-.17V2.6c0-.09-.08-.17-.17-.17zM8.81 7.35v5.74c0 .04-.01.11-.06.13 0 0-1.25.89-3.31.89-2.49 0-5.44-.78-5.44-5.92S2.58 1.99 5.1 2c2.18 0 3.06.49 3.2.58.04.05.06.09.06.14L7.94 4.5c0 .09-.09.2-.2.17-.36-.11-.9-.33-2.17-.33-1.47 0-3.05.42-3.05 3.73s1.5 3.7 2.58 3.7c.92 0 1.25-.11 1.25-.11v-2.3H4.88c-.11 0-.19-.08-.19-.17V7.35c0-.09.08-.17.19-.17h3.74c.11 0 .19.08.19.17z"></path></svg>
      <svg aria-hidden="true" class="octicon octicon-logo-gist" height="28" version="1.1" viewBox="0 0 25 16" width="40"><path d="M4.7 8.73h2.45v4.02c-.55.27-1.64.34-2.53.34-2.56 0-3.47-2.2-3.47-5.05 0-2.85.91-5.06 3.48-5.06 1.28 0 2.06.23 3.28.73V2.66C7.27 2.33 6.25 2 4.63 2 1.13 2 0 4.69 0 8.03c0 3.34 1.11 6.03 4.63 6.03 1.64 0 2.81-.27 3.59-.64V7.73H4.7v1zm6.39 3.72V6.06h-1.05v6.28c0 1.25.58 1.72 1.72 1.72v-.89c-.48 0-.67-.16-.67-.7v-.02zm.25-8.72c0-.44-.33-.78-.78-.78s-.77.34-.77.78.33.78.77.78.78-.34.78-.78zm4.34 5.69c-1.5-.13-1.78-.48-1.78-1.17 0-.77.33-1.34 1.88-1.34 1.05 0 1.66.16 2.27.36v-.94c-.69-.3-1.52-.39-2.25-.39-2.2 0-2.92 1.2-2.92 2.31 0 1.08.47 1.88 2.73 2.08 1.55.13 1.77.63 1.77 1.34 0 .73-.44 1.42-2.06 1.42-1.11 0-1.86-.19-2.33-.36v.94c.5.2 1.58.39 2.33.39 2.38 0 3.14-1.2 3.14-2.41 0-1.28-.53-2.03-2.75-2.23h-.03zm8.58-2.47v-.86h-2.42v-2.5l-1.08.31v2.11l-1.56.44v.48h1.56v5c0 1.53 1.19 2.13 2.5 2.13.19 0 .52-.02.69-.05v-.89c-.19.03-.41.03-.61.03-.97 0-1.5-.39-1.5-1.34V6.94h2.42v.02-.01z"></path></svg>
</a>
    <div class="site-search js-site-search" role="search">
        <div class="header-search" role="search">

<!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="https://gist.github.com/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label class="header-search-wrapper form-control js-chromeless-input-container">
    <input type="text" class="form-control js-site-search-focus header-search-input" data-hotkey="s" name="q" placeholder="Search…" tabindex="1" autocorrect="off" autocomplete="off" autocapitalize="off">
  </label>

</form></div>

    </div>
    <ul class="header-nav left" role="navigation">
      <li class="header-nav-item">
        <a href="https://gist.github.com/discover" class="header-nav-link" data-ga-click="Header, go to all gists, text:all gists">All gists</a>
      </li>

      <li class="header-nav-item">
        <a href="https://github.com/" class="header-nav-link" data-ga-click="Header, go to GitHub, text:GitHub">GitHub</a>
      </li>
    </ul>

      <div class="header-actions" role="navigation">
        <a href="https://gist.github.com/join?source=header-gist" class="btn btn-primary" data-ga-click="Header, sign up">Sign up for a GitHub account</a>
        <a href="https://gist.github.com/auth/github?return_to=gist" class="btn" data-ga-click="Header, sign in">Sign in</a>
      </div>

  </div>
</div>




    <div id="start-of-content" class="accessibility-aid"></div>

      <div id="js-flash-container">
</div>


    <div role="main" class="main-content">
      
  <div itemscope="" itemtype="http://schema.org/Code">
    <div id="gist-pjax-container" class="gist-content-wrapper" data-pjax-container="">
          <div class="gist-detail-intro gist-banner">
      <div class="container">
        <a href="https://gist.github.com/" class="btn btn-outline right">Create a gist now</a>
        <p class="lead">
          Instantly share code, notes, and snippets.
        </p>
      </div>
    </div>


  <div class="gisthead pagehead repohead instapaper_ignore readability-menu experiment-repo-nav">
    <div class="container">
        

<div class="container repohead-details-container">

  <ul class="pagehead-actions">


    <li>
        <a href="https://gist.github.com/login?return_to=https%3A%2F%2Fgist.github.com%2Frhythmus%2F11123057" aria-label="You must be signed in to star a gist" class="btn btn-sm btn-with-count tooltipped tooltipped-n" rel="nofollow">
    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"></path></svg>
    Star
</a>
  <a href="https://gist.github.com/rhythmus/11123057/stargazers" class="social-count">
    1
</a>
    </li>

      <li>
          <a href="https://gist.github.com/login?return_to=https%3A%2F%2Fgist.github.com%2Frhythmus%2F11123057" aria-label="You must be signed in to fork a gist" class="btn btn-sm btn-with-count tooltipped tooltipped-n" rel="nofollow">
    <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
    Fork
</a>
  <a href="https://gist.github.com/rhythmus/11123057/forks" class="social-count">
    0
</a>
      </li>

  </ul>

  <h1 class="public css-truncate">
    <img alt="@rhythmus" class="avatar gist-avatar" height="26" src="./Query Collections · GitHub_files/903152" width="26">
    <span class="author"><a href="https://gist.github.com/rhythmus" class="url fn" rel="author"><span itemprop="author">rhythmus</span></a></span><!--
        --><span class="path-divider">/</span><!--
        --><strong itemprop="name" class="gist-header-title css-truncate-target"><a href="https://gist.github.com/rhythmus/11123057">query-collections.md</a></strong>

      <span class="fork-flag">
        <span class="text">forked from <a href="https://gist.github.com/Sewdn/10616795">Sewdn/query-collections.md</a></span>
      </span>
    <div class="gist-timestamp">Last active <time-ago datetime="2015-11-28T04:35:14Z" title="28 нояб. 2015 г., 9:35 GMT+5">7 months ago</time-ago></div>
  </h1>
</div>

<div class="container gist-file-navigation">
  <div class="right file-navigation-options" data-multiple="">

    <div class="file-navigation-option">
  <input type="hidden" name="protocol_type" value="clone">

  <div class="select-menu js-menu-container js-select-menu">
    <div class="input-group js-select-button js-zeroclipboard-container">
      <div class="input-group-button">
  <button type="button" class="btn btn-sm select-menu-button js-menu-target" data-ga-click="Repository, clone Embed, location:repo overview">
    Embed
  </button>
</div>
<input type="text" class="form-control input-monospace input-sm js-zeroclipboard-target js-url-field" value="&lt;script src=&quot;https://gist.github.com/rhythmus/11123057.js&quot;&gt;&lt;/script&gt;" aria-label="Clone this repository at &lt;script src=&quot;https://gist.github.com/rhythmus/11123057.js&quot;&gt;&lt;/script&gt;" readonly="">
<div class="input-group-button">
  <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><svg aria-hidden="true" class="octicon octicon-clippy" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"></path></svg></button>
</div>

    </div>

    <div class="select-menu-modal-holder">
      <div class="select-menu-modal js-menu-content" aria-hidden="true">
        <div class="select-menu-header">
          <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>
          <span class="select-menu-title">What would you like to do?</span>
        </div>

        <div class="select-menu-list js-navigation-container" role="menu">
            <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg>
              <div class="select-menu-item-text">
                <input type="radio" name="protocol_selector" value="embed" checked="">
                <span class="select-menu-item-heading">
                  
                  Embed
                </span>
                  <span class="description">
                    Embed this gist in your website.
                  </span>
                <span class="js-select-button-text hidden-select-button-text">
                  <div class="input-group-button">
  <button type="button" class="btn btn-sm select-menu-button js-menu-target" data-ga-click="Repository, clone Embed, location:repo overview">
    Embed
  </button>
</div>
<input type="text" class="form-control input-monospace input-sm js-zeroclipboard-target js-url-field" value="&lt;script src=&quot;https://gist.github.com/rhythmus/11123057.js&quot;&gt;&lt;/script&gt;" aria-label="Clone this repository at &lt;script src=&quot;https://gist.github.com/rhythmus/11123057.js&quot;&gt;&lt;/script&gt;" readonly="">
<div class="input-group-button">
  <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><svg aria-hidden="true" class="octicon octicon-clippy" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"></path></svg></button>
</div>

                </span>
              </div>
            </div>
            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg>
              <div class="select-menu-item-text">
                <input type="radio" name="protocol_selector" value="share">
                <span class="select-menu-item-heading">
                  
                  Share
                </span>
                  <span class="description">
                    Copy sharable URL for this gist.
                  </span>
                <span class="js-select-button-text hidden-select-button-text">
                  <div class="input-group-button">
  <button type="button" class="btn btn-sm select-menu-button js-menu-target" data-ga-click="Repository, clone Share, location:repo overview">
    Share
  </button>
</div>
<input type="text" class="form-control input-monospace input-sm js-zeroclipboard-target js-url-field" value="https://gist.github.com/rhythmus/11123057" aria-label="Clone this repository at https://gist.github.com/rhythmus/11123057" readonly="">
<div class="input-group-button">
  <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><svg aria-hidden="true" class="octicon octicon-clippy" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"></path></svg></button>
</div>

                </span>
              </div>
            </div>
            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg>
              <div class="select-menu-item-text">
                <input type="radio" name="protocol_selector" value="http">
                <span class="select-menu-item-heading">
                  Clone via
                  HTTPS
                </span>
                  <span class="description">
                    Clone with Git or checkout with SVN using the repository's web address.
                  </span>
                <span class="js-select-button-text hidden-select-button-text">
                  <div class="input-group-button">
  <button type="button" class="btn btn-sm select-menu-button js-menu-target" data-ga-click="Repository, clone HTTPS, location:repo overview">
    HTTPS
  </button>
</div>
<input type="text" class="form-control input-monospace input-sm js-zeroclipboard-target js-url-field" value="https://gist.github.com/11123057.git" aria-label="Clone this repository at https://gist.github.com/11123057.git" readonly="">
<div class="input-group-button">
  <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><svg aria-hidden="true" class="octicon octicon-clippy" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"></path></svg></button>
</div>

                </span>
              </div>
            </div>
        </div>
        <div class="select-menu-list" role="menu">
          <a class="select-menu-item select-menu-action" href="https://help.github.com/articles/which-remote-url-should-i-use" target="_blank">
            <svg aria-hidden="true" class="octicon octicon-question select-menu-item-icon" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M6 10h2v2H6v-2zm4-3.5C10 8.64 8 9 8 9H6c0-.55.45-1 1-1h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5h-1c-.28 0-.5.22-.5.5V7H4c0-1.5 1.5-3 3-3s3 1 3 2.5zM7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7z"></path></svg>
            <div class="select-menu-item-text">
              Learn more about clone URLs
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


    <div class="file-navigation-option">
    <a href="https://mac.github.com/" class="btn btn-sm tooltipped tooltipped-s tooltipped-multiline" aria-label="Save rhythmus/11123057 to your computer and use it in GitHub Desktop.">
      <svg aria-hidden="true" class="octicon octicon-desktop-download" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 6h3V0h2v6h3l-4 4-4-4zm11-4h-4v1h4v8H1V3h4V2H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5.34c-.25.61-.86 1.39-2.34 2h8c-1.48-.61-2.09-1.39-2.34-2H15c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1z"></path></svg>
    </a>
</div>


    <div class="file-navigation-option">
      <a href="https://gist.github.com/rhythmus/11123057/archive/50a1acb483f531d71a5651e482b23fec93e31870.zip" class="btn btn-sm" rel="nofollow" data-ga-click="Gist, download zip, location:gist overview">
        Download ZIP
      </a>
    </div>
  </div>

  <div class="left">
    <nav class="reponav js-repo-nav js-sidenav-container-pjax" role="navigation" data-pjax="#gist-pjax-container">

  <a href="https://gist.github.com/rhythmus/11123057" aria-label="Code" aria-selected="true" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-pjax="true" data-selected-links="gist_code /rhythmus/11123057">
    <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg>
    Code
</a>
    <a href="https://gist.github.com/rhythmus/11123057/revisions" aria-label="Revisions" class="js-selected-navigation-item reponav-item" data-hotkey="g r" data-pjax="true" data-selected-links="gist_revisions /rhythmus/11123057/revisions">
      <svg aria-hidden="true" class="octicon octicon-git-commit" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
      Revisions
      <span class="counter">32</span>
</a>
    <a href="https://gist.github.com/rhythmus/11123057/stargazers" aria-label="Stars" class="js-selected-navigation-item reponav-item" data-hotkey="g s" data-pjax="true" data-selected-links="gist_stars /rhythmus/11123057/stargazers">
      <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"></path></svg>
      Stars
      <span class="counter">1</span>
</a>
</nav>

  </div>
</div>


    </div><!-- /.container -->
  </div><!-- /.repohead -->

<div class="container new-discussion-timeline experiment-repo-nav">
  <div class="repository-content gist-content">
    



<div>
  <div class="repository-meta js-details-container">
  <div class="repository-meta-content" itemprop="about">
    Query Collections
  </div>
</div>


      <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-query-collections-md" class="file">
      <div class="file-header">
        <div class="file-actions">

          <a href="https://gist.github.com/rhythmus/11123057/raw/50a1acb483f531d71a5651e482b23fec93e31870/query-collections.md" class="btn btn-sm ">Raw</a>
        </div>
        <div class="file-info">
          <span class="icon">
            <svg aria-hidden="true" class="octicon octicon-gist" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"></path></svg>
          </span>
          <a class="tooltipped tooltipped-s css-truncate" aria-label="Permalink" href="https://gist.github.com/rhythmus/11123057#file-query-collections-md">
            <strong class="user-select-contain gist-blob-name css-truncate-target">
              query-collections.md
            </strong>
          </a>
        </div>
      </div>
    
  <div id="readme" class="readme blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="text"><p><a href="./Query Collections · GitHub_files/687474703a2f2f692e696d6775722e636f6d2f454144576e79702e706e67" target="_blank"><img src="./Query Collections · GitHub_files/687474703a2f2f692e696d6775722e636f6d2f454144576e79702e706e67" alt="" data-canonical-src="http://i.imgur.com/EADWnyp.png" style="max-width:100%;"></a></p>

<h1><a id="user-content-query-collections" class="anchor" href="https://gist.github.com/rhythmus/11123057#query-collections" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query Collections</h1>

<h2><a id="user-content-how-to-reactively-change-a-resultset-when-a-querys-parameters-change" class="anchor" href="https://gist.github.com/rhythmus/11123057#how-to-reactively-change-a-resultset-when-a-querys-parameters-change" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to reactively change a resultset when a query’s parameters change</h2>

<h3><a id="user-content-tldr" class="anchor" href="https://gist.github.com/rhythmus/11123057#tldr" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h3>

<p>A query defines a set of conditions on a collection of documents. Most of the time, only the documents that meet these conditions need to be published to the client. In many cases the query’s conditions are subject to the state of the application (for instance the selected sorting field). This pattern describes how to update your query’s result set reactively <em>without losing the cursor’s state</em>. This way, results are preserved over different adjustements of a query if they meet both set of conditions.</p>

<h3><a id="user-content-an-example-case" class="anchor" href="https://gist.github.com/rhythmus/11123057#an-example-case" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>An example case</h3>

<p>To illustrate this pattern best, we'll be using the following example case throughout.</p>

<p>Let’s say you have a collection of <code>Players</code> and a collection of <code>Games</code>. We track each score in a <code>Scores</code> collection. Some example data:</p>

<p>Players:</p>

<div class="highlight highlight-source-json"><pre>[
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>, <span class="pl-ii">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Frans<span class="pl-pds">"</span></span>},
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>002<span class="pl-pds">"</span></span>, <span class="pl-ii">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Jos<span class="pl-pds">"</span></span>},
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>003<span class="pl-pds">"</span></span>, <span class="pl-ii">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Alain<span class="pl-pds">"</span></span>}
]</pre></div>

<p>Games:</p>

<div class="highlight highlight-source-json"><pre>[
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>, <span class="pl-ii">name</span>: <span class="pl-s"><span class="pl-pds">"</span>snake<span class="pl-pds">"</span></span>},
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>002<span class="pl-pds">"</span></span>, <span class="pl-ii">name</span>: <span class="pl-s"><span class="pl-pds">"</span>tetris<span class="pl-pds">"</span></span>}
]</pre></div>

<p>Scores:</p>

<div class="highlight highlight-source-json"><pre>[
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>, <span class="pl-ii">player</span>: <span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>, <span class="pl-ii">game</span>: <span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>, <span class="pl-ii">score</span>: <span class="pl-c1">350</span>},
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>002<span class="pl-pds">"</span></span>, <span class="pl-ii">player</span>: <span class="pl-s"><span class="pl-pds">"</span>002<span class="pl-pds">"</span></span>, <span class="pl-ii">game</span>: <span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>, <span class="pl-ii">score</span>: <span class="pl-c1">400</span>},
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>003<span class="pl-pds">"</span></span>, <span class="pl-ii">player</span>: <span class="pl-s"><span class="pl-pds">"</span>003<span class="pl-pds">"</span></span>, <span class="pl-ii">game</span>: <span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>, <span class="pl-ii">score</span>: <span class="pl-c1">450</span>},
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>004<span class="pl-pds">"</span></span>, <span class="pl-ii">player</span>: <span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>, <span class="pl-ii">game</span>: <span class="pl-s"><span class="pl-pds">"</span>002<span class="pl-pds">"</span></span>, <span class="pl-ii">score</span>: <span class="pl-c1">3500</span>},
  {<span class="pl-ii">_id</span>: <span class="pl-s"><span class="pl-pds">"</span>006<span class="pl-pds">"</span></span>, <span class="pl-ii">player</span>: <span class="pl-s"><span class="pl-pds">"</span>003<span class="pl-pds">"</span></span>, <span class="pl-ii">game</span>: <span class="pl-s"><span class="pl-pds">"</span>002<span class="pl-pds">"</span></span>, <span class="pl-ii">score</span>: <span class="pl-c1">2500</span>}
]</pre></div>

<p>We want to list the highscore ranking for a game. When another game is selected, the ranking must be updated accordingly.</p>

<h3><a id="user-content-the-evident-approach" class="anchor" href="https://gist.github.com/rhythmus/11123057#the-evident-approach" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The evident approach</h3>

<p>To template the ranking, we iterate over the result of a query that is run inside a <code>ranking</code> helper, and build an ordered list in the DOM.</p>

<p>ranking.html:</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">template</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>ranking<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">ol</span>&gt;
  {{#each ranking}}
    {{#with data}
    &lt;<span class="pl-ent">li</span>&gt;{{player.name}}: {{score}}&lt;/<span class="pl-ent">li</span>&gt;
    {{/with}}
  {{/each}}
  &lt;/<span class="pl-ent">ol</span>&gt;
&lt;/<span class="pl-ent">template</span>&gt;</pre></div>

<p>The query returns all scores for a game who’s ID is stored in a session variable <code>selectedGame</code>. To link the related player’s data to the score document, we change the scope with a custom <code>dataScope</code> helper to fetch the related data.</p>

<p>ranking.js:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">Template</span>.<span class="pl-smi">ranking</span>.<span class="pl-en">helpers</span>({
  <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">ranking</span><span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-k">function</span>(){
    <span class="pl-k">return</span> <span class="pl-smi">Scores</span>.<span class="pl-c1">find</span>(
      {game<span class="pl-k">:</span> <span class="pl-smi">Session</span>.<span class="pl-en">get</span>(<span class="pl-s"><span class="pl-pds">'</span>selectedGame<span class="pl-pds">'</span></span>)},
      {score<span class="pl-k">:</span> <span class="pl-c1">1</span>}
    );
  },
  <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">dataScope</span><span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-k">function</span>(){
    <span class="pl-k">return</span> {
      player<span class="pl-k">:</span> <span class="pl-smi">Players</span>.<span class="pl-en">findOne</span>(<span class="pl-v">this</span>.<span class="pl-smi">player</span>),
      score<span class="pl-k">:</span> <span class="pl-v">this</span>.<span class="pl-smi">score</span>
    }
  }
});</pre></div>

<p>In order for this to work, we also need our data to be published depending on the currently selected game.</p>

<p>client.js</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">Meteor</span>.<span class="pl-en">startup</span>(<span class="pl-k">function</span>(){
  <span class="pl-smi">Deps</span>.<span class="pl-en">autorun</span>(<span class="pl-k">function</span> () {
    <span class="pl-smi">Meteor</span>.<span class="pl-en">subscribe</span>(<span class="pl-s"><span class="pl-pds">'</span>gameRanking<span class="pl-pds">'</span></span>, <span class="pl-smi">Session</span>.<span class="pl-en">get</span>(<span class="pl-s"><span class="pl-pds">'</span>selectedGame<span class="pl-pds">'</span></span>));
  });
});</pre></div>

<p>As soon as the <code>selectedGame</code> Session variable changes, the subscription is rerun, new data is being published and the query is rerun, matching the newly published documents.</p>

<p>Not only the <code>Scores</code> need to be published, but also the selected game in the <code>Games</code> collection and the player data of the player that registered the score to the <code>Players</code> collection.</p>

<p>server.js</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">Meteor</span>.<span class="pl-en">publish</span>(<span class="pl-s"><span class="pl-pds">'</span>gameRanking<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">gameId</span>){
  <span class="pl-en">check</span>(gameId, <span class="pl-c1">String</span>);
  <span class="pl-c">// lookup all playerIds that have played this game</span>
  <span class="pl-c">// and make them unique</span>
  <span class="pl-k">var</span> playerIds <span class="pl-k">=</span> <span class="pl-smi">_</span>.<span class="pl-en">uniq</span>(<span class="pl-smi">_</span>.<span class="pl-en">pluck</span>(
    <span class="pl-smi">Scores</span>.<span class="pl-c1">find</span>({game<span class="pl-k">:</span> gameId}, {fields<span class="pl-k">:</span>{player<span class="pl-k">:</span> <span class="pl-c1">true</span>}}).<span class="pl-en">fetch</span>(),
    <span class="pl-s"><span class="pl-pds">'</span>player<span class="pl-pds">'</span></span>
  ));
  <span class="pl-k">return</span> [
    <span class="pl-smi">Scores</span>.<span class="pl-c1">find</span>({game<span class="pl-k">:</span> gameId}),
    <span class="pl-smi">Players</span>.<span class="pl-c1">find</span>({_id<span class="pl-k">:</span> {$in<span class="pl-k">:</span> playerIds}}),
    <span class="pl-smi">Games</span>.<span class="pl-c1">find</span>({_id<span class="pl-k">:</span> gameId})
  ];
});</pre></div>

<h3><a id="user-content-the-drawbacks" class="anchor" href="https://gist.github.com/rhythmus/11123057#the-drawbacks" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The drawbacks</h3>

<p>This approach works. But there are a few drawbacks.</p>

<p>First of all, this is not very <a href="http://en.wikipedia.org/wiki/Don&#39;t_repeat_yourself">DRY</a>. We have to duplicate the conditions of our query in the client side data-query and the server-side data publication.</p>

<p>Secondly, when the reactive context changes (the selected game), lots of things are going on:</p>

<ul>
<li>the query is rerun: a new cursor is constructed for the new <code>gameId</code>, resulting in an empty cursor (because no scores for this game are published yet). Therefor, all DOM in the ranking template will be removed reactively.</li>
<li>the subscription is rerun. The previous subscription was canceled and a new one was started.</li>
<li>new data is being published by the newly started subscription to the <code>Scores</code> collection</li>
<li>all theses scores matching our query (all of them), are being added to the live cursor, and drawn to screen reactively.</li>
</ul>

<h3><a id="user-content-a-better-aproach" class="anchor" href="https://gist.github.com/rhythmus/11123057#a-better-aproach" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A better aproach</h3>

<p>The problem is we have to rerun our client-side query on our <code>Scores</code> collection as soon as one of the criteria of our filters changes. This makes it impossible to transition documents that match both states of the query. They are redrawn anyway, because the cursor was reset.
We need this query on the client-side, because we never know that no other subscription is subscribing to other scores in our collection. So we have to filter them again on the client.</p>

<p>Instead of publishing the related scores to the existing <code>Scores</code> collection, we are going to publish to a dedicated ranking collection that only exists on the client: <code>gameranking</code>. This is our "Query Collection". We only publish data to this collection that meets our conditions.</p>

<p>client.js</p>

<div class="highlight highlight-source-js"><pre>GameRanking <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Meteor.Collection</span>(<span class="pl-s"><span class="pl-pds">"</span>gameranking<span class="pl-pds">"</span></span>);
<span class="pl-smi">Meteor</span>.<span class="pl-en">startup</span>(<span class="pl-k">function</span>(){
  <span class="pl-smi">Deps</span>.<span class="pl-en">autorun</span>(<span class="pl-k">function</span> () {
    <span class="pl-smi">Meteor</span>.<span class="pl-en">subscribe</span>(<span class="pl-s"><span class="pl-pds">"</span>gameRanking<span class="pl-pds">"</span></span>, <span class="pl-smi">Session</span>.<span class="pl-en">get</span>(<span class="pl-s"><span class="pl-pds">'</span>selectedGame<span class="pl-pds">'</span></span>));
  });
});</pre></div>

<p>When a new subscription starts for this publication, all scores for the provided <code>gameId</code> must be subscribed to, and with them all related data to the other collections (<code>Scores</code>, <code>Players</code>) (if needed). Note the id we use to publish to the <code>gameranking</code> collection: it’s the same id as the score document from the <code>Scores</code> collection.</p>

<p>server.js</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">Meteor</span>.<span class="pl-en">publish</span>(<span class="pl-s"><span class="pl-pds">"</span>gameRanking<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">gameId</span>) {
  <span class="pl-k">var</span> self <span class="pl-k">=</span> <span class="pl-v">this</span>;
  <span class="pl-en">check</span>(gameId, <span class="pl-c1">String</span>);
  <span class="pl-k">var</span> handle <span class="pl-k">=</span> <span class="pl-smi">Scores</span>.<span class="pl-c1">find</span>({game<span class="pl-k">:</span> gameId}).<span class="pl-en">observeChanges</span>({
      <span class="pl-en">added</span><span class="pl-k">:</span> <span class="pl-k">function</span> (<span class="pl-smi">id</span>, <span class="pl-smi">data</span>, <span class="pl-smi">index</span>) {
        <span class="pl-smi">self</span>.<span class="pl-en">added</span>(<span class="pl-s"><span class="pl-pds">"</span>gameranking<span class="pl-pds">"</span></span>, id, {
          score<span class="pl-k">:</span> <span class="pl-smi">data</span>.<span class="pl-smi">score</span>,
          player<span class="pl-k">:</span> <span class="pl-smi">data</span>.<span class="pl-smi">player</span>
        });
        <span class="pl-smi">self</span>.<span class="pl-en">added</span>(<span class="pl-s"><span class="pl-pds">"</span>Scores<span class="pl-pds">"</span></span>, id, data);
        <span class="pl-smi">self</span>.<span class="pl-en">added</span>(<span class="pl-s"><span class="pl-pds">"</span>Players<span class="pl-pds">"</span></span>, <span class="pl-smi">data</span>.<span class="pl-smi">player</span>, <span class="pl-smi">Players</span>.<span class="pl-en">findOne</span>(<span class="pl-smi">data</span>.<span class="pl-smi">player</span>));
      }
  });
  <span class="pl-smi">self</span>.<span class="pl-en">ready</span>();
  <span class="pl-smi">self</span>.<span class="pl-en">onStop</span>(<span class="pl-k">function</span> () {
    <span class="pl-smi">handle</span>.<span class="pl-c1">stop</span>();
  });
});</pre></div>

<p>We now don't have to query for the right documents on the client anymore, since we know that only the relevant documents exist inside this collection.</p>

<p>ranking.js:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">Template</span>.<span class="pl-smi">ranking</span>.<span class="pl-en">helpers</span>({
  <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">ranking</span><span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-k">function</span>(){
    <span class="pl-k">return</span> <span class="pl-smi">GameRanking</span>.<span class="pl-c1">find</span>(
      {},
      {score<span class="pl-k">:</span> <span class="pl-c1">1</span>}
    );
  },
  <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">data</span><span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-k">function</span>(){
    <span class="pl-k">return</span> {
      player<span class="pl-k">:</span> <span class="pl-smi">Players</span>.<span class="pl-en">findOne</span>(<span class="pl-v">this</span>.<span class="pl-smi">player</span>),
      score<span class="pl-k">:</span> <span class="pl-v">this</span>.<span class="pl-smi">score</span>
    }
  }
});</pre></div>

<h3><a id="user-content-why-is-this-better" class="anchor" href="https://gist.github.com/rhythmus/11123057#why-is-this-better" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why is this better?</h3>

<p>This approach is <a href="http://en.wikipedia.org/wiki/Don&#39;t_repeat_yourself">DRY</a>. We only declare our conditions once (in the data publication). We know that all of the data in our client-side collection meets the conditions, and just list all of them. We only need to order the list client-side.</p>

<p>When the reactive context changes, only the publication is rerun. Meteor’s diffing algorithm will make sure that all content published by the previous subscription that was stopped, will be removed and all new content will be added from and to the <code>gameranking</code> collection.</p>

<p>Our query is not rerun, but the cursor is made aware of new content being added and existing content being removed or reordered. Only those DOM changes are done to transition from one state to the next, instead of doing a complete redraw.</p>

<h3><a id="user-content-more-complex-publications" class="anchor" href="https://gist.github.com/rhythmus/11123057#more-complex-publications" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>more complex publications</h3>

<p>Sadly (in this example), still all of our DOM elements are removed and drawn back on after the subscription. There is no overlap between 2 states of our query. Let’s change the requirements of our example a bit. We only want to rank the <em>top score</em> of each player for a game.</p>

<p>server.js</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">Meteor</span>.<span class="pl-en">publish</span>(<span class="pl-s"><span class="pl-pds">"</span>gameRanking<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">gameId</span>) {
  <span class="pl-k">var</span> self <span class="pl-k">=</span> <span class="pl-v">this</span>;
  <span class="pl-en">check</span>(gameId, <span class="pl-c1">String</span>);
  <span class="pl-k">var</span> topScores <span class="pl-k">=</span> {};
  <span class="pl-k">var</span> handle <span class="pl-k">=</span> <span class="pl-smi">Scores</span>.<span class="pl-c1">find</span>({game<span class="pl-k">:</span> gameId}).<span class="pl-en">observeChanges</span>({
      <span class="pl-en">added</span><span class="pl-k">:</span> <span class="pl-k">function</span> (<span class="pl-smi">id</span>, <span class="pl-smi">data</span>, <span class="pl-smi">index</span>) {
        <span class="pl-k">if</span>(<span class="pl-k">!</span>topScores[<span class="pl-smi">data</span>.<span class="pl-smi">player</span>]){
          <span class="pl-smi">self</span>.<span class="pl-en">added</span>(<span class="pl-s"><span class="pl-pds">"</span>gameranking<span class="pl-pds">"</span></span>, <span class="pl-smi">data</span>.<span class="pl-smi">player</span>, {
            score<span class="pl-k">:</span> <span class="pl-smi">data</span>.<span class="pl-smi">score</span>,
            player<span class="pl-k">:</span> {
              _id<span class="pl-k">:</span> <span class="pl-smi">data</span>.<span class="pl-smi">player</span>,
              name<span class="pl-k">:</span> <span class="pl-smi">Players</span>.<span class="pl-en">findOne</span>(<span class="pl-smi">data</span>.<span class="pl-smi">player</span>).<span class="pl-c1">name</span>
            }
          });
        } <span class="pl-k">else</span> <span class="pl-k">if</span>(<span class="pl-smi">data</span>.<span class="pl-smi">score</span> <span class="pl-k">&gt;</span> topScores[<span class="pl-smi">data</span>.<span class="pl-smi">player</span>]){
          <span class="pl-smi">self</span>.<span class="pl-en">changed</span>(<span class="pl-s"><span class="pl-pds">"</span>gameranking<span class="pl-pds">"</span></span>, <span class="pl-smi">data</span>.<span class="pl-smi">player</span>, {
            score<span class="pl-k">:</span> <span class="pl-smi">data</span>.<span class="pl-smi">score</span>
          });
        }
      }
  });
  <span class="pl-smi">self</span>.<span class="pl-en">ready</span>();
  <span class="pl-smi">self</span>.<span class="pl-en">onStop</span>(<span class="pl-k">function</span> () {
    <span class="pl-smi">handle</span>.<span class="pl-c1">stop</span>();
  });
});</pre></div>

<p>We now have published only the best scores of each player for a game and we have published them to the client-side <code>gameranking</code> collection with the player’s unique id, since we know that only one score per player will be present.</p>

<p>When the first score for a player was found, a new document is being added to the <code>gameranking</code> collection. We also add the player’s name, so we don't need to publish to the player’s collection anymore. Also we don't need to change the scope to fetch other data.</p>

<p>ranking.html:</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">template</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>ranking<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">ul</span>&gt;
  {{#each ranking}}
    &lt;<span class="pl-ent">li</span>&gt;{{player.name}}: {{score}}&lt;/<span class="pl-ent">li</span>&gt;
  {{/each}}
  &lt;/<span class="pl-ent">ul</span>&gt;
&lt;/<span class="pl-ent">template</span>&gt;</pre></div>

<p>When a new topscore was found for a player (during the first run when fetching all of the player’s score for the game, or during a later update when a new score was posted), the existing record for the player is being updated. Only the new score is being published and client side this change effect will result in an update of the score property of the document and a new sorting in the DOM.</p>

<p>When the reactive context changes (<code>selectedGame</code> Session variable), only the score property will be updated to the player’s topscore for that game, leaving the document with the player’s id present in the store and thus in the DOM. This way you can transition your DOM-element to it’s new state.</p>

<h3><a id="user-content-conclusion" class="anchor" href="https://gist.github.com/rhythmus/11123057#conclusion" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h3>

<p>This pattern uses a dedicated client-side collection to publish all of the data that meets the conditions of a query. Client side you can just fetch all of the documents of this query, knowing the data-set will be updated automagically as soon as your query changes.</p>

<p>This approach is one of the use cases of the excellent publication/subscription construct in meteor.</p>

<p>There are really no limits on the complexity of the logic you want to use when publishing data. You could combine all sorts of queries on different collections and publish to a unified client-side collection referencing to all of the related documents.</p>
</article>
  </div>

  </div>
  
</div>


  <a name="comments"></a>
  <div class="discussion-timeline gist-discussion-timeline js-quote-selection-container ">
    <div class="js-discussion js-socket-channel" data-channel="tenant:1:marked-as-read:gist:11123057">
      




<!-- Rendered timeline since 2015-11-27 20:35:14 -->
<div id="partial-timeline-marker" class="js-timeline-marker js-updatable-content" data-url="/rhythmus/11123057/show_partial?partial=gist%2Ftimeline_marker&amp;since=1448685314" data-last-modified="Sat, 28 Nov 2015 04:35:14 GMT">
</div>


      <div class="discussion-timeline-actions">
          <div class="signed-out-comment">
    <a href="https://gist.github.com/join?source=comment-gist" class="btn btn-primary" rel="nofollow">Sign up for free</a>
    <strong>to join this conversation on GitHub</strong>.
    Already have an account?
    <a href="https://gist.github.com/login?return_to=https%3A%2F%2Fgist.github.com%2Frhythmus%2F11123057" rel="nofollow">Sign in to comment</a>
</div>

      </div>
    </div>
  </div>
</div>
  </div>

  <div class="modal-backdrop js-touch-events"></div>
</div><!-- /.container -->

    </div><!-- /.gist-pjax-container -->
  </div>

    </div>

        <div class="container site-footer-container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links right">
        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
      <li><a href="https://developer.github.com/" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li><a href="https://training.github.com/" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li><a href="https://shop.github.com/" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>

    </ul>

    <a href="https://github.com/" aria-label="Homepage" class="site-footer-mark" title="GitHub">
      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" version="1.1" viewBox="0 0 16 16" width="24"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>
    <ul class="site-footer-links">
      <li>© 2016 <span title="0.15471s from github-fe154-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact</a></li>
        <li><a href="https://help.github.com/" data-ga-click="Footer, go to help, text:help">Help</a></li>
    </ul>
  </div>
</div>



    

    <div id="ajax-error-message" class="ajax-error-message flash flash-error">
      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"></path></svg>
      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>
      </button>
      Something went wrong with that request. Please try again.
    </div>


      
      <script crossorigin="anonymous" integrity="sha256-gAfIVUud6aWAsNOSggWc6sb4k7F0+DqqWfQAri6SsSY=" src="./Query Collections · GitHub_files/frameworks-8007c8554b9de9a580b0d39282059ceac6f893b174f83aaa59f400ae2e92b126.js"></script>
      <script async="async" crossorigin="anonymous" integrity="sha256-r9GBKCFIV86OT9xylnrPtiOgr73Zrezqg73X9Tg5pkI=" src="./Query Collections · GitHub_files/github-afd18128214857ce8e4fdc72967acfb623a0afbdd9adecea83bdd7f53839a642.js"></script>
      
      
      
      
      
      
    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden">
      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"></path></svg>
      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
    </div>
    <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>
    </button>
  </div>
</div>

  


</body></html>